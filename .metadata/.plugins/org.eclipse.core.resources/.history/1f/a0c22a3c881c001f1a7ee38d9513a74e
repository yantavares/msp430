#include <msp430.h>

#define TRUE 1
#define DBC 1000

void count_leds(int count);
void debounce(int b);
void io_config();


/**
 * main.c
 */
int main(void)
{
    int count = 0;
	WDTCTL = WDTPW | WDTHOLD;	                         // stop watchdog timer
	io_config();
	while(TRUE){
	    while(P2IN & BIT1 == BIT1);
	    debounce(DBC);
	    count++;
	    count_leds(count);
	    while(P2IN & BIT1 == 0);
	    debounce(DBC);
	}

	return 0;
}

void count_leds(int count){
    switch(count & 3){                                  // count & ...011 -> Garante que o número está entre 0 e 3
        case 0: P1OUT &= ~BIT0; P4OUT &= ~BIT7; break;  // Apaga os leds
        case 1: P1OUT &= ~BIT0; P4OUT |= BIT7; break;   // Liga led verde
        case 2: P1OUT |= BIT0; P4OUT &= ~BIT7; break;   // Liga led vermelho
        case 3: P1OUT |= BIT0; P4OUT |= BIT7; break;    // Apaga os leds
    }
}

void debounce(int b){
    volatile int x;                                     // Faz o compilador não otimizar variável
    for(x = 0; x < b; x++);
}





